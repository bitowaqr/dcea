---
title: "Equity impact report"
author: "Author"
date: "`r Sys.Date()`"
output: word_document
params:
  intName: NA
  compName: NA
  disthoc_plot: NA
  report_distr_plots: NA
  final_dtbl: NA
  sii: NA
  nhb: NA
  report_ce_plane: NA
  report_equity_nhb_plot: NA
  report_equity_icer_plot: NA
  input_names: NA
  input_values: NA
  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```


```{r message=FALSE, warning=FALSE, include=FALSE}
library(ggplot2)
library(cowplot)
```

*This report was generated by entering various user-defined assumptions into a prototype health equity impact calculator produced by the University of York (https://shiny.york.ac.uk/nice_equity_tool). The University of York offers no guarantees or warranties of any kind for the assumptions used and the results produced.*

***


The following analysis compares **`r params$intName`** against **`r params$compName`**. 




**Summary of distributional inputs:**  

  * Net health benefit: **`r params$nhb` QALYs**

  * Net health inequality:  **`r params$sii` QALYs**

\
\


```{r echo=FALSE, warning=FALSE}
final_dtbl = params$final_dtbl
final_dtbl[is.na(final_dtbl)] = ""
knitr::kable(
  final_dtbl[,-c(8:9)],
  row.names = F,
  align = "lccccc",
  caption = "**Table 1**: caption tbc",
  booktabs=  T
  )
```


\newpage

### Distributional health impact

```{r echo=FALSE, warning=FALSE, fig.height=16, fig.width=14}
cowplot::plot_grid(plotlist = params$report_distr_plots,nrow = 3)
```


### CE-Plane

```{r echo=FALSE, warning=FALSE, fig.height=5, fig.width=5}
params$report_ce_plane
```


### Equity - net health impact trade-off

```{r echo=FALSE, warning=FALSE, fig.height=5, fig.width=5}
params$report_equity_nhb_plot
```


### Equity - ICER trade-off

```{r echo=FALSE, warning=FALSE, fig.height=5, fig.width=5}
params$report_equity_icer_plot
```


### Who bares the opportunity costs? 

```{r echo=FALSE}
params$disthoc_plot
```



\newpage

# **Inputs**

This section summarises the input data that have been used to create the output tables and plots.

```{r echo=FALSE}
input_table = c()
for(i in seq_along(params$input_names) ){
  input_table = rbind(
    input_table,
    c(params$input_names[i],paste0(params$input_values[[i]],collapse = "; "))
    )
}
kable(input_table,caption = "Table 2: Input parameters",col.names = c("Variable","Value"))
```



